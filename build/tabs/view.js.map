{"version":3,"file":"tabs/view.js","mappings":"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","sources":["webpack://simple-tabs-block/./src/tabs/view.js"],"sourcesContent":["(() => {\n\n    const cloudCatchTabs = (tabsWrapper) => {\n        const tabsContainer = tabsWrapper.querySelector('.wp-block-cloudcatch-tabs__container');\n        const tabLabelsContainer = tabsWrapper.querySelector('.wp-block-cloudcatch-tabs__tabs');\n        const tabLabels = tabLabelsContainer.querySelectorAll('[role=\"tab\"]');\n\n        const keys = {\n            end: 35,\n            home: 36,\n            left: 37,\n            up: 38,\n            right: 39,\n            down: 40,\n        };\n\n        // Add or subtract depending on key pressed\n        const direction = {\n            37: -1,\n            38: -1,\n            39: 1,\n            40: 1,\n        };\n\n        let activeIndex = 0;\n\n        const init = () => {\n            tabLabels.forEach(tabLabel => {\n                if (tabLabel.classList.contains('active')) {\n                    activeIndex = tabLabel.getAttribute('tabid');\n                }\n            });\n\n            setActiveTab(activeIndex);\n        };\n\n        const initEvents = () => {\n            tabLabels.forEach(tabLabel => {\n                tabLabel.addEventListener('click', (e) => {\n                    setActiveTab(tabLabel.getAttribute('tabid'));\n                });\n\n                tabLabel.addEventListener('keyup', (e) => {\n                    var key = e.keyCode;\n\n                    switch (key) {\n                        case keys.left:\n                        case keys.right:\n                            determineOrientation(e);\n                            break;\n                    }\n                });\n            });\n        };\n\n        const setActiveTab = (id) => {\n            tabsContainer.querySelectorAll(':scope > *').forEach(tab => {\n                tab.style.display = 'none';\n            });\n\n            tabLabelsContainer.querySelectorAll(':scope > *').forEach(label => {\n                label.classList.remove('active');\n                label.setAttribute( 'aria-selected', 'false' );\n            });\n\n            activeIndex = parseInt(id);\n\n            const currentTabLabel = tabLabelsContainer.querySelector('[tabid=\"' + activeIndex + '\"]');\n            currentTabLabel.classList.add('active');\n            currentTabLabel.setAttribute( 'aria-selected', 'true' );\n\n            tabsContainer.querySelector('[tabid=\"' + activeIndex + '\"]').style.display = 'block';\n        };\n\n        const determineOrientation = (event) => {\n            var key = event.keyCode;\n            var vertical = tabLabelsContainer.getAttribute('aria-orientation') == 'vertical';\n            var proceed = false;\n\n            if (vertical) {\n                if (key === keys.up || key === keys.down) {\n                    event.preventDefault();\n                    proceed = true;\n                }\n            } else {\n                if (key === keys.left || key === keys.right) {\n                    proceed = true;\n                }\n            }\n\n            if (proceed) {\n                switchTabOnArrowPress(event);\n            }\n        };\n\n        function switchTabOnArrowPress(event) {\n            var pressed = event.keyCode;\n\n            for (var x = 0; x < tabLabels.length; x++) {\n                tabLabels[x].addEventListener('focus', focusEventHandler);\n            }\n\n            if (direction[pressed]) {\n                var desiredIndex = activeIndex + direction[pressed];\n\n                if (typeof tabLabels[desiredIndex] !== 'undefined') {\n                    tabLabels[desiredIndex].focus();\n                } else if (pressed === keys.left || pressed === keys.up) {\n                    tabLabels[tabLabels.length - 1].focus();\n                } else if (pressed === keys.right || pressed == keys.down) {\n                    tabLabels[0].focus();\n                }\n            }\n        }\n\n        function focusEventHandler(event) {\n            var target = event.target;\n\n            setTimeout(checkTabFocus, 0, target);\n        }\n\n        // Only activate tab on focus if it still has focus after the delay\n        function checkTabFocus(target) {\n            var focused = document.activeElement;\n\n            if (target === focused) {\n                setActiveTab(target.getAttribute('tabid'));\n            }\n        }\n\n        init();\n        initEvents();\n    };\n\n    const tabsWrappers = document.querySelectorAll('.wp-block-cloudcatch-tabs');\n\n    tabsWrappers.forEach(tabsWrapper => {\n        cloudCatchTabs(tabsWrapper);\n    });\n\n})();\n\n"],"names":["cloudCatchTabs","tabsWrapper","tabsContainer","querySelector","tabLabelsContainer","tabLabels","querySelectorAll","keys","end","home","left","up","right","down","direction","activeIndex","init","forEach","tabLabel","classList","contains","getAttribute","setActiveTab","initEvents","addEventListener","e","key","keyCode","determineOrientation","id","tab","style","display","label","remove","setAttribute","parseInt","currentTabLabel","add","event","vertical","proceed","preventDefault","switchTabOnArrowPress","pressed","x","length","focusEventHandler","desiredIndex","focus","target","setTimeout","checkTabFocus","focused","document","activeElement","tabsWrappers"],"sourceRoot":""}